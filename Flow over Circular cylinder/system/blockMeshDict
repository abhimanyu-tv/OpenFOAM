/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  5                                     |
|   \\  /    A nd           | Web:      www.OpenFOAM.org                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      blockMeshDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

convertToMeters 1;

Lu 6; //upstream length of the domain
Ld 12; //downstream length of the domain
H 15; //height of the domain
D 1; //diameter of the cylinder
R #calc "$D/2";
h #calc "$H/2";
// radAngle #calc "degToRad(45)";  //convert angle to radians
C #calc "$D*0.35355339059";   //Point in curve R sin angle
Rn #calc"-1.0*$R";




vertices
(
    (#calc "-1.0*$Lu" #calc "-1.0*$h" 0)
    (#calc "-1.0*$D" #calc "-1.0*$h" 0)
    ($D #calc "-1.0*$h" 0)
    ($Ld #calc "-1.0*$h" 0)

    ($Ld #calc "-1.0*$D" 0)
    ($D #calc "-1.0*$D" 0)
    (#calc "-1.0*$D" #calc "-1.0*$D" 0)
    (#calc "-1.0*$Lu" #calc "-1.0*$D" 0)

    (#calc "-1.0*$C" #calc "-1.0*$C" 0)
    ($C #calc "-1.0*$C" 0)
    (#calc "-1.0*$C" $C 0)
    ($C $C 0)

    (#calc "-1.0*$Lu" $D 0)
    (#calc "-1.0*$D" $D 0)
    ($D $D 0)
    ($Ld $D 0)

    ($Ld $h 0)
    ($D $h 0)
    (#calc "-1.0*$D" $h 0)
    (#calc "-1.0*$Lu" $h 0)

    (#calc "-1.0*$Lu" #calc "-1.0*$h" 1)
    (#calc "-1.0*$D" #calc "-1.0*$h" 1)
    ($D #calc "-1.0*$h" 1)
    ($Ld #calc "-1.0*$h" 1)

    ($Ld #calc "-1.0*$D" 1)
    ($D #calc "-1.0*$D" 1)
    (#calc "-1.0*$D" #calc "-1.0*$D" 1)
    (#calc "-1.0*$Lu" #calc "-1.0*$D" 1)

    (#calc "-1.0*$C" #calc "-1.0*$C" 1)
    ($C #calc "-1.0*$C" 1)
    (#calc "-1.0*$C" $C 1)
    ($C $C 1)

    (#calc "-1.0*$Lu" $D 1)
    (#calc "-1.0*$D" $D 1)
    ($D $D 1)
    ($Ld $D 1)

    ($Ld $h 1)
    ($D $h 1)
    (#calc "-1.0*$D" $h 1)
    (#calc "-1.0*$Lu" $h 1)


);


blocks
(
    hex (0 1 6 7 20 21 26 27) (40 60 1) simpleGrading (1 1 1)
    hex (1 2 5 6 21 22 25 26) (80 60 1) simpleGrading (1 1 1)
    hex (2 3 4 5 22 23 24 25) (100 60 1) simpleGrading (1 1 1)
    hex (7 6 13 12 27 26 33 32) (40 60 1) simpleGrading (1 1 1)
    hex (6 8 11 13 26 28 31 33) (20 60 1) simpleGrading (1 1 1)
    hex (6 5 9 8 26 25 29 28) (80 20 1) simpleGrading (1 1 1)
    hex (11 10 14 13 31 30 34 33) (80 20 1) simpleGrading (1 1 1)
    hex (9 5 14 10 29 25 34 30) (20 60 1) simpleGrading (1 1 1)
    hex (5 4 15 14 25 24 35 34) (100 60 1) simpleGrading (1 1 1)
    hex (12 13 18 19 32 33 38 39) (40 60 1) simpleGrading (1 1 1)
    hex (13 14 17 18 33 34 37 38) (80 60 1) simpleGrading (1 1 1)
    hex (14 15 16 17 34 35 36 37) (100 60 1) simpleGrading (1 1 1)
);

edges
(
    arc 8 9 (0 $Rn 0)
    arc 9 10 ($R 0 0)
    arc 10 11 (0 $R 0)
    arc 11 8 ($Rn 0 0)
    arc 28 29 (0 $Rn 1)
    arc 29 30 ($R 0 1)
    arc 30 31 (0 $R 1)
    arc 31 28 ($Rn 0 1) 
);

boundary
(
    inlet
    {
        type patch;
        faces
        (
            (0 20 27 7)
            (7 27 32 12)
            (12 32 39 19)
        );
    }
    outlet
    {
        type patch;
        faces
        (
            (3 23 24 4)
            (4 24 35 15)
            (15 35 16 36)
        );
    }
    wall
    {
        type wall;
        faces
        (
            (0 1 21 20)
            (1 2 22 21)
            (2 3 23 22)
            (19 18 38 39)
            (18 17 37 38)
            (17 16 36 37)
        );
    }
    cylinder
    {
        type wall;
        faces
        (
            (8 9 29 28)
            (9 10 30 29)
            (11 10 30 31)
            (11 8 28 31)
        );
    }
    frontAndBack
    {
        type empty;
        faces
        (
            (0 1 6 7)
            (1 2 5 6)
            (2 3 4 5)
            (7 6 13 12)
            (6 8 11 13)
            (11 10 14 13)
            (6 5 9 8)
            (9 5 14 10)
            (5 4 15 14)
            (12 13 18 19)
            (13 14 17 18)
            (14 15 16 17)

            (20 21 26 27)
            (21 22 25 26)
            (22 23 24 25)
            (27 26 33 32)
            (26 28 31 33)
            (31 30 34 33)
            (26 25 29 28)
            (29 25 34 30)
            (25 24 35 34)
            (32 33 38 39)
            (33 34 37 38)
            (34 35 36 37)
        );
    }
);

// ************************************************************************* //
